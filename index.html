<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR Furniture Viewer</title>
    <!-- Babylon.js core and loaders directly included -->
    <script src="https://cdn.babylonjs.com/babylon.js"></script>
    <script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.min.js"></script>
    <!-- Style to make canvas fullscreen -->
    <style>
        html, body {
            width: 100%;
            height: 100%;
            margin: 0;
            overflow: hidden;
        }
        #renderCanvas {
            width: 100%;
            height: 100%;
            touch-action: none; /* Prevent default touch events */
        }
    </style>
</head>
<body>
    <!-- Canvas to render Babylon.js scene -->
    <canvas id="renderCanvas"></canvas>

    <script>
        // Wait for the DOM to be fully loaded
        document.addEventListener('DOMContentLoaded', function () {
            // Create a Babylon.js engine
            var canvas = document.getElementById('renderCanvas');
            var engine = new BABYLON.Engine(canvas, true);

            // Function to create the scene
            function createScene() {
                // Create a basic Babylon.js scene
                var scene = new BABYLON.Scene(engine);

                // Create an XR experience helper (for AR/VR)
                var xrHelper = scene.createDefaultXRExperienceAsync();

                // Load the 3D model of the chair
                BABYLON.SceneLoader.ImportMesh('', 'https://cdn.glitch.global/9ba6f6a8-a02a-4b10-add8-5a112346d315/chair.glb?v=1720042081194', '', scene, function (meshes) {
                    // Manipulate the loaded mesh (if needed)
                    var chair = meshes[0];
                    chair.scaling = new BABYLON.Vector3(0.1, 0.1, 0.1); // Example scaling

                    // Optionally, enable user interaction with the chair (move, rotate, etc.)
                    xrHelper.input.onControllerAddedObservable.add(function (controller) {
                        controller.onMotionControllerInitObservable.add(function (motionController) {
                            // Enable chair interaction here (e.g., moving and rotating)
                            // Example: chair.position = motionController.rootMesh.position;
                        });
                    });
                });

                return scene;
            }

            // Call the createScene function to create and run the scene
            var scene = createScene();
            engine.runRenderLoop(function () {
                scene.render();
            });
        });
    </script>
</body>
</html>
